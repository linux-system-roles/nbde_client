# SPDX-License-Identifier: MIT
---
# The provider for nbde_client role. Currently 'clevis' is supported.
nbde_client_provider: clevis

# nbde_client_bindings is a list, and its elements support the following keys:
#
# * device             - specifies the path of a LUKS device. (REQUIRED)
# * pass               - specifies a valid passphrase for this device.
# * keyfile            - specifies either the absolute or relative path of a
#                        valid keyfile for the device pointed out by device.
#
#  * state             - specifies whether a binding with the configuration
#                        described should be added or removed. Setting state
#                        to present (the default) means a binding will be
#                        added; setting state to absent means a binding will
#                        be removed from the device/slot.
#
# * slot               - specifies the slot to use for the binding. Default
#                        is 1.
# * servers            - specifies a list of servers to bind to. To enable
#                        high availability, simply specify more than one server
#                        here.
# * threshold          - specifies the threshold for the Shamir Secret Sharing
#                        (SSS) scheme that is put in place when using more
#                        than one server. When using multiple servers,
#                        threshold indicates how many of those servers should
#                        succeed, in terms of decryption, in order to complete
#                        the process of recovering the LUKS passphrase to open
#                        the device.
# * discard_passphrase - specifies whether we should discard the passphrase
#                        provided -- via either pass or keyfile, in devices
#                        -- after completing the binding operation.

# Example:
# nbde_client_bindings:
#    - device: /dev/sda1
#      keyfile: /vault/keyfile
#      state: present
#      slot: 2
#      threshold: 1
#      discard_passphrase: no
#      servers:
#        - http://server1.example.com
#        - http://server2.example.com
nbde_client_bindings: []

# nbde_client_remote_dir specifies a directory in the remote hosts that may
# be used for storing temporary data such as transferred keyfiles.
# Default is /root/.local/share/nbde_client/.
nbde_client_remote_dir: /root/.local/share/nbde_client/

# nbde_client_update_initramfs indicates whether the initramfs should be
# updated in case changes are made when processing the clevis operations
# on the devices. Default is yes.
nbde_client_update_initramfs: yes

# vim:set ts=2 sw=2 et:
